# Mender MCU client
CONFIG_MENDER_MCU_CLIENT=y
CONFIG_MENDER_LOG_LEVEL_DBG=y
CONFIG_MENDER_DEPLOYMENT_LOGS=n
# CONFIG_MENDER_SCHEDULER_WORK_QUEUE_STACK_SIZE=20
CONFIG_MENDER_CLIENT_UPDATE_POLL_INTERVAL=30
CONFIG_MENDER_CLIENT_INVENTORY_REFRESH_INTERVAL=60
CONFIG_MENDER_RETRY_ERROR_BACKOFF=5
CONFIG_MENDER_RETRY_ERROR_MAX_BACKOFF=15
CONFIG_MENDER_ARTIFACT_GENERATE=n
CONFIG_MENDER_SERVER_TENANT_TOKEN="5T54LWieqKE4N24f5thlFlfsY1pNrIIlWlEYbrhoeog"
# CONFIG_MENDER_CLIENT_ADD_ON_INVENTORY=y
# CONFIG_MENDER_CLIENT_ADD_ON_CONFIGURE=n
#CONFIG_MENDER_CLIENT_ADD_ON_TROUBLESHOOT=y
#CONFIG_MENDER_CLIENT_TROUBLESHOOT_SHELL=y
CONFIG_MENDER_PLATFORM_STORAGE_TYPE_WEAK=y
# CONFIG_MENDER_PLATFORM_TLS_TYPE_CRYPTOAUTHLIB=n
CONFIG_USER_MENDER_ARTIFACT_NAME="mender-artifact"
CONFIG_LOG_OUTPUT_FORMAT_ISO8601_TIMESTAMP=y

# Required to get Device Troubleshoot add-on working
CONFIG_ZVFS_OPEN_MAX=16

# General
CONFIG_EVENTS=y
CONFIG_MAIN_STACK_SIZE=2048
# Heap memory pool is used for dynamic memory allocation such as dynamic threads
# CONFIG_HEAP_MEM_POOL_SIZE=5120
# CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=13312
CONFIG_PICOLIBC=y
CONFIG_GPIO=y
CONFIG_POSIX_API=y
CONFIG_REMOTEIO_SERVICE_STACK_SIZE=2048
CONFIG_REMOTEIO_SERVICE_PRIORITY=5
# Dynamic thread
CONFIG_DYNAMIC_THREAD=y
CONFIG_DYNAMIC_THREAD_POOL_SIZE=2
CONFIG_DYNAMIC_THREAD_ALLOC=y

# Backup SRAM
# CONFIG_STM32_BACKUP_SRAM=y

# Networking
CONFIG_NETWORKING=y
CONFIG_NET_TCP=y
CONFIG_NET_IPV6=n
CONFIG_NET_IPV4=y
CONFIG_NET_DHCPV4=n
CONFIG_NET_SHELL=n
CONFIG_NET_MGMT=y
CONFIG_NET_MGMT_EVENT=y
CONFIG_NET_MGMT_EVENT_THREAD=y
CONFIG_NET_MGMT_EVENT_STACK_SIZE=2048
CONFIG_NET_SOCKETS_SOCKOPT_TLS=y
CONFIG_NET_SOCKETS_TLS_MAX_CONTEXTS=8
CONFIG_NET_MAX_CONN=16
# enlarge RX stack size to avoid stack overflow during calling zsock_accept()
CONFIG_NET_RX_STACK_SIZE=2048
# CONFIG_NET_TX_STACK_SIZE=2400
CONFIG_NET_TCP_WORKQ_STACK_SIZE=2048
# CONFIG_NET_MAX_CONTEXTS=6
CONFIG_NET_SOCKETS_CONNECT_TIMEOUT=60000
CONFIG_NET_TCP_RECV_QUEUE_TIMEOUT=2000
CONFIG_NET_TCP_KEEPALIVE=y

# Network buffer
CONFIG_NET_PKT_RX_COUNT=16
CONFIG_NET_PKT_TX_COUNT=16
CONFIG_NET_BUF_RX_COUNT=512
CONFIG_NET_BUF_TX_COUNT=512

# Sockets
CONFIG_NET_SOCKETS=y
CONFIG_ZVFS_POLL_MAX=9

# DNS
CONFIG_DNS_RESOLVER=y
CONFIG_DNS_RESOLVER_ADDITIONAL_BUF_CTR=5
CONFIG_DNS_RESOLVER_ADDITIONAL_QUERIES=2
CONFIG_DNS_RESOLVER_MAX_SERVERS=2
CONFIG_DNS_NUM_CONCUR_QUERIES=5
CONFIG_DNS_SERVER_IP_ADDRESSES=y
CONFIG_DNS_SERVER1="8.8.8.8"

# mbedTLS
CONFIG_MBEDTLS=y
CONFIG_MBEDTLS_DEBUG=y
CONFIG_MBEDTLS_LOG_LEVEL_DBG=n
CONFIG_MBEDTLS_BUILTIN=y
CONFIG_MBEDTLS_ENABLE_HEAP=y
CONFIG_MBEDTLS_HEAP_SIZE=100000
# CONFIG_MBEDTLS_CFG_FILE="config-tls-generic.h"
CONFIG_MBEDTLS_ECDH_C=y
CONFIG_MBEDTLS_ECDSA_C=y
CONFIG_MBEDTLS_ECP_C=y
CONFIG_MBEDTLS_ECP_DP_SECP256R1_ENABLED=y
CONFIG_MBEDTLS_ECP_DP_SECP384R1_ENABLED=y
CONFIG_MBEDTLS_GENPRIME_ENABLED=y
CONFIG_MBEDTLS_CIPHER_AES_ENABLED=y
CONFIG_MBEDTLS_CIPHER_CCM_ENABLED=y
CONFIG_MBEDTLS_CIPHER_GCM_ENABLED=y
CONFIG_MBEDTLS_KEY_EXCHANGE_ECDHE_PSK_ENABLED=y
CONFIG_MBEDTLS_KEY_EXCHANGE_ECDHE_RSA_ENABLED=y
CONFIG_MBEDTLS_KEY_EXCHANGE_ECDHE_ECDSA_ENABLED=y
CONFIG_MBEDTLS_KEY_EXCHANGE_RSA_ENABLED=y
CONFIG_MBEDTLS_PEM_CERTIFICATE_FORMAT=y
CONFIG_MBEDTLS_PK_WRITE_C=y
CONFIG_MBEDTLS_SHA256=y
CONFIG_MBEDTLS_SHA384=y
CONFIG_MBEDTLS_ENTROPY_C=y
CONFIG_MBEDTLS_ENTROPY_POLL_ZEPHYR=y
CONFIG_MBEDTLS_SSL_MAX_CONTENT_LEN=16384
CONFIG_MBEDTLS_SERVER_NAME_INDICATION=y

# MCUboot
CONFIG_BOOTLOADER_MCUBOOT=y
CONFIG_MCUBOOT_SIGNATURE_KEY_FILE="bootloader/mcuboot/boot/zephyr/root-rsa-2048.pem"

# Logging
CONFIG_LOG=y
CONFIG_NET_LOG=y
CONFIG_NET_SOCKETS_LOG_LEVEL_DBG=n
CONFIG_NET_CONTEXT_LOG_LEVEL_DBG=n
CONFIG_NET_TCP_LOG_LEVEL_DBG=n
CONFIG_LOG_MODE_IMMEDIATE=y
# CONFIG_LOG_PROCESS_THREAD_STACK_SIZE=2048
CONFIG_USE_SEGGER_RTT=y
CONFIG_RTT_CONSOLE=y
CONFIG_UART_CONSOLE=n
CONFIG_LOG_BACKEND_RTT=y
CONFIG_LOG_BACKEND_UART=n

# Debugging
CONFIG_DEBUG_OPTIMIZATIONS=y

# Thread
CONFIG_THREAD_MONITOR=y
CONFIG_THREAD_NAME=y
CONFIG_THREAD_ANALYZER=y
CONFIG_THREAD_ANALYZER_AUTO_SEPARATE_CORES=n

# Flash, Storage
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y

# UART
CONFIG_SERIAL=y
CONFIG_UART_INTERRUPT_DRIVEN=y

# LED Strip
CONFIG_LED_STRIP=y
CONFIG_LED_STRIP_LOG_LEVEL_DBG=y
CONFIG_REMOTEIO_USE_MY_WS28XX=n
# CONFIG_WS2812_PWM=y

# DMA
CONFIG_WS2812_PWM_LOG_LEVEL_DBG=n

# Let's prevent surprises caused by type mismatches and other similar things
# only causing compilation warnings, but potentially leading to fatal issues.
CONFIG_COMPILER_WARNINGS_AS_ERRORS=y